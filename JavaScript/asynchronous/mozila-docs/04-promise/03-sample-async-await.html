<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simple fetch()</title>
  </head>
  <body>
    <script>

      // not working yet
      function GetResponse(response){
        console.log('get response');
        return new Promise((resolve,reject)=>{
          if (!response.ok) {
            reject(new Error(`HTTP error! status: ${response.status}`));
          } else {
            resolve(response.blob());
          }
        })
      }

      function LoadImage(myBlob){
        console.log('load response');
        return new Promise((resolve,reject)=>{
          let objectURL = URL.createObjectURL(myBlob);
          let image = document.createElement('img');
          image.src = objectURL;
          document.body.appendChild(image);
        })
      }

      async function LoadImage(){
        console.log('onece');
        try{
          let RequestImage = await fetch('coffee.jpg');
          let ReceiveImage = await GetResponse(RequestImage);
          let test = await LoadImage(ReceiveImage);
          let now = await test.then();
        }
        catch(test){
          console.log(e);
        }
      }

      console.log('test');
      LoadImage();

    </script>
  </body>
</html>